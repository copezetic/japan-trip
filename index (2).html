<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Japan Adventure 2026 | Ultimate Planner</title>
<style>
:root { --primary: #8B0000; --secondary: #FFB7C5; --accent: #D4AF37; --bg: #FFF8F0; }
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; line-height: 1.6; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; background: white; }
h1 { color: var(--primary); text-align: center; font-size: 2.5rem; margin: 20px 0; }
h2 { color: var(--primary); font-size: 1.8rem; margin: 30px 0 15px; padding-bottom: 10px; border-bottom: 3px solid var(--secondary); }
h3 { color: var(--primary); font-size: 1.4rem; margin: 20px 0 10px; }
h4 { font-size: 1.1rem; color: #333; margin: 15px 0 8px; }
.subtitle { text-align: center; font-size: 1.1rem; color: #666; margin-bottom: 30px; }
nav { background: var(--bg); padding: 15px; border-radius: 8px; margin: 20px 0; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
nav a { color: var(--primary); text-decoration: none; padding: 8px 16px; border-radius: 4px; background: white; border: 1px solid var(--secondary); transition: all 0.3s; }
nav a:hover { background: var(--primary); color: white; }
.user-selector { background: var(--bg); padding: 20px; border-radius: 8px; margin: 20px 0; text-align: center; }
.user-buttons { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 15px; }
.user-btn { padding: 10px 20px; border: 2px solid #ddd; background: white; border-radius: 6px; cursor: pointer; font-size: 16px; transition: all 0.3s; }
.user-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
.user-btn.active { border-color: var(--primary); background: var(--primary); color: white; font-weight: bold; }
.intro, .info-box { background: var(--bg); padding: 20px; border-radius: 8px; border-left: 4px solid var(--accent); margin: 20px 0; }
.run-box { background: #E3F2FD; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #2196F3; }
.tip-box, .green { background: #d4edda; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #28a745; }
.highlight { background: #FFF3CD; padding: 12px; border-radius: 6px; margin: 10px 0; }
.budget-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
.budget-card { background: var(--bg); padding: 20px; border-radius: 8px; text-align: center; border-left: 4px solid var(--accent); }
.budget-card h3 { font-size: 1rem; margin: 0 0 10px 0; color: #666; }
.budget-amount { font-size: 2rem; font-weight: bold; color: var(--primary); }
.budget-note { font-size: 0.85rem; color: #666; margin-top: 5px; }
table { width: 100%; border-collapse: collapse; margin: 20px 0; }
th { background: var(--primary); color: white; padding: 12px; text-align: left; }
td { padding: 10px; border: 1px solid #ddd; }
tr:nth-child(even) { background: var(--bg); }
.nightlife-section { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); color: white; padding: 25px; border-radius: 12px; margin: 30px 0; }
.nightlife-section h3 { color: #ffd700; margin-bottom: 20px; }
.club-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px; }
.club-card { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #ffd700; }
.club-name { color: #ffd700; font-weight: bold; font-size: 1.1rem; margin-bottom: 8px; }
.club-details { font-size: 0.9rem; opacity: 0.95; margin: 5px 0; }
.day-section { background: white; border: 2px solid var(--secondary); border-radius: 12px; padding: 25px; margin: 30px 0; }
.day-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid var(--secondary); }
.day-title { color: var(--primary); font-size: 1.5rem; margin: 0; }
.add-activity-btn, .edit-btn { padding: 10px 20px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; transition: all 0.3s; margin-left: 5px; }
.add-activity-btn:hover, .edit-btn:hover { background: #C41E3A; transform: translateY(-2px); }
.edit-btn { padding: 5px 10px; font-size: 14px; }
.activity-card { background: #f9f9f9; border-left: 4px solid var(--accent); border-radius: 8px; padding: 15px; margin: 10px 0; transition: all 0.3s; position: relative; }
.activity-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); transform: translateX(5px); }
.activity-card.editable { border-left-color: #2196F3; }
.activity-time { font-weight: bold; color: var(--primary); font-size: 1.1rem; }
.activity-title { font-size: 1.05rem; font-weight: bold; margin: 8px 0; }
.activity-details { color: #666; margin: 5px 0; font-size: 0.95rem; }
.activity-actions { display: flex; gap: 8px; margin-top: 10px; flex-wrap: wrap; }
.delete-btn { padding: 5px 10px; background: #ff6b6b; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
.delete-btn:hover { background: #ff5252; }
.attendee-tag { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 500; margin: 5px 5px 5px 0; }
.dewitt { background: #4A90E2; color: white; }
.christine { background: #E91E63; color: white; }
.danni { background: #9C27B0; color: white; }
.kimothy { background: #FF9800; color: white; }
.added-by { font-size: 0.85rem; color: #999; font-style: italic; margin-top: 8px; }
.original-activity { opacity: 0.95; }
.custom-activity { background: #e8f5e9; }
.modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center; }
.modal.active { display: flex; }
.modal-content { background: white; padding: 30px; border-radius: 12px; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto; }
.form-group { margin-bottom: 20px; }
.form-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #333; }
.form-group input, .form-group textarea { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 16px; }
.form-group textarea { min-height: 80px; resize: vertical; }
.attendee-checkboxes { display: flex; flex-direction: column; gap: 10px; }
.attendee-checkboxes label { display: flex; align-items: center; gap: 10px; font-weight: normal; cursor: pointer; }
.attendee-checkboxes input[type="checkbox"] { width: 20px; height: 20px; cursor: pointer; }
.modal-buttons { display: flex; gap: 10px; justify-content: flex-end; margin-top: 25px; }
.btn { padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; font-weight: bold; transition: all 0.3s; }
.btn-primary { background: var(--primary); color: white; }
.btn-primary:hover { background: #C41E3A; }
.btn-secondary { background: #ddd; color: #333; }
.btn-secondary:hover { background: #ccc; }
.btn-link, .landmark-links a { display: inline-block; padding: 8px 16px; background: var(--bg); color: var(--primary); text-decoration: none; border-radius: 4px; border: 1px solid var(--secondary); margin: 5px 5px 5px 0; font-size: 0.9rem; transition: all 0.3s; }
.btn-link:hover, .landmark-links a:hover { background: var(--primary); color: white; }
.landmark-links { display: flex; flex-wrap: wrap; gap: 5px; margin: 15px 0; }
ul, ol { margin: 15px 0 15px 25px; }
li { margin: 8px 0; }
.restaurant-card { background: white; border: 2px solid var(--secondary); border-radius: 8px; padding: 15px; margin: 15px 0; }
.restaurant-card h4 { margin-top: 0; color: var(--primary); }
.restaurant-card .subtitle-text { font-size: 0.9rem; color: #666; font-style: italic; margin: 5px 0; }
.restaurant-card .price { color: #28a745; font-weight: bold; margin-top: 10px; }
@media (max-width: 768px) {
    .club-grid, .budget-grid { grid-template-columns: 1fr; }
    nav { position: relative; }
    .day-header { flex-direction: column; gap: 15px; align-items: flex-start; }
}

.city-header-img {
    width: 100%;
    max-width: 1200px;
    height: 250px;
    object-fit: cover;
    border-radius: 8px;
    margin: 20px 0;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
</style>
</head>
<body>

<h1>üáØüáµ JAPAN</h1>
<p class="subtitle">Ultimate Travel Guide & Group Planner<br>March 4 ‚Äì 17, 2026</p>

<nav>
    <a href="#planner">üë• Group Planner</a>
    <a href="checklist.html">üìã Checklist</a>
    <a href="#budget">Budget</a>
    <a href="#weather">Weather</a>
    <a href="#hotels">Hotels</a>
    <a href="#tokyo">Tokyo</a>
    <a href="#kyoto">Kyoto</a>
    <a href="#osaka">Osaka</a>
    <a href="#hakone">Hakone</a>
    <a href="#tips">Tips</a>
</nav>

<section id="planner">
<h2>üë• Group Planning</h2>

<div class="user-selector">
    <h3>Who are you?</h3>
    <p style="color: #666; margin-bottom: 15px;">Select your name to add or edit activities</p>
    <div class="user-buttons">
        <button class="user-btn" data-user="dewitt">DeWitt</button>
        <button class="user-btn" data-user="christine">Christine</button>
        <button class="user-btn" data-user="danni">Danni</button>
        <button class="user-btn" data-user="kimothy">Kimothy</button>
    </div>
</div>

<div class="tip-box">
    <strong>üí° How this works:</strong>
    <ul style="margin-top: 10px;">
        <li>Select your name above</li>
        <li>Click "<strong>Edit</strong>" on existing activities to modify them</li>
        <li>Click "<strong>+ Add Activity</strong>" to add new plans</li>
        <li>Mark who's joining each activity</li>
        <li><strong>Refresh the page</strong> to see updates from others</li>
    </ul>
</div>

<div id="days-container"></div>
</section>

<section id="budget">
<h2>üí∞ Budget Overview</h2>

<div class="budget-grid">
    <div class="budget-card">
        <h3>Hotels</h3>
        <div class="budget-amount">$5,108</div>
        <div class="budget-note">13 nights total</div>
    </div>
    <div class="budget-card">
        <h3>Activities</h3>
        <div class="budget-amount">$1,050</div>
        <div class="budget-note">Per person</div>
    </div>
    <div class="budget-card">
        <h3>Food</h3>
        <div class="budget-amount">$1,400-2,100</div>
        <div class="budget-note">Per person</div>
    </div>
    <div class="budget-card">
        <h3>Per Person</h3>
        <div class="budget-amount">~$3,300-4,950</div>
        <div class="budget-note">Excl. hotel</div>
    </div>
</div>
</section>

<section id="weather">
<h2>üå§Ô∏è Weather & Packing</h2>

<h3>Expected Weather (March 4-17)</h3>
<div class="budget-grid">
    <div class="budget-card">
        <h3>üóº Tokyo</h3>
        <div class="budget-amount" style="font-size: 1.5rem;">43-55¬∞F</div>
        <div class="budget-note">Cool, some rain</div>
    </div>
    <div class="budget-card">
        <h3>‚õ©Ô∏è Kyoto</h3>
        <div class="budget-amount" style="font-size: 1.5rem;">39-55¬∞F</div>
        <div class="budget-note">Cold mornings</div>
    </div>
    <div class="budget-card">
        <h3>üèØ Osaka</h3>
        <div class="budget-amount" style="font-size: 1.5rem;">43-57¬∞F</div>
        <div class="budget-note">Slightly warmer</div>
    </div>
    <div class="budget-card">
        <h3>üóª Hakone</h3>
        <div class="budget-amount" style="font-size: 1.5rem;">37-54¬∞F</div>
        <div class="budget-note">Cooler, mountains</div>
    </div>
</div>

<div class="tip-box">
    <strong>Pack layers</strong> - cold mornings (5-10¬∞C), mild afternoons (15-20¬∞C). Early cherry blossoms possible late March!
</div>

<h3>üéí Packing Essentials</h3>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
    <div class="info-box">
        <h4>üëï Clothing</h4>
        <ul>
            <li>Medium jacket</li>
            <li>Rain jacket</li>
            <li>3-4 long-sleeves</li>
            <li>2-3 short-sleeves</li>
            <li>2 pants/jeans</li>
            <li>Warm sweater</li>
            <li>Scarf</li>
        </ul>
    </div>
    <div class="info-box">
        <h4>üëü Footwear</h4>
        <ul>
            <li>Walking shoes (broken in!)</li>
            <li>Slip-on shoes</li>
            <li>Good socks</li>
        </ul>
    </div>
    <div class="info-box">
        <h4>üéí Accessories</h4>
        <ul>
            <li>Compact umbrella</li>
            <li>Day backpack</li>
            <li>Sunglasses</li>
            <li>Water bottle</li>
            <li>Power bank</li>
            <li>Travel adapter</li>
        </ul>
    </div>
    <div class="info-box">
        <h4>üíä Health</h4>
        <ul>
            <li>Allergy meds (pollen!)</li>
            <li>Face masks</li>
            <li>Hand sanitizer</li>
            <li>Prescriptions</li>
            <li>First aid kit</li>
        </ul>
    </div>
    <div class="info-box">
        <h4>üì± Tech</h4>
        <ul>
            <li>Passport</li>
            <li>Phone & charger</li>
            <li>Headphones</li>
            <li>Credit cards + cash</li>
        </ul>
    </div>
    <div class="info-box">
        <h4>üå∏ Japan Specific</h4>
        <ul>
            <li>Small towel (onsen)</li>
            <li>Cash (yen)</li>
            <li>JR Pass voucher</li>
            <li>Coin purse</li>
            <li>Zip-lock bags</li>
        </ul>
    </div>
</div>
</section>

<section id="hotels">
<h2>üè® Hotels</h2>
<table>
<tr><th>Dates</th><th>Hotel</th><th>Cost</th></tr>
<tr><td>Mar 4-7</td><td><a href="https://www.shibaparkhotel.com/en/" target="_blank">Shiba Park Hotel, Tokyo</a></td><td>$1,465</td></tr>
<tr><td>Mar 8-11</td><td><a href="https://www.granvia-kyoto.co.jp/english/" target="_blank">Hotel Granvia Kyoto</a></td><td>$1,829</td></tr>
<tr><td>Mar 12-13</td><td><a href="https://www.zentisosaka.com/" target="_blank">Zentis Osaka</a></td><td>$342</td></tr>
<tr><td>Mar 14-15</td><td><a href="https://www.kowakien.com/ten-yu/en/" target="_blank">Hakone Kowakien TEN-YU</a></td><td>$1,077</td></tr>
<tr><td>Mar 16</td><td><a href="https://www.hotel-groove.com/shinjuku/" target="_blank">Hotel Groove Shinjuku</a></td><td>$395</td></tr>
<tr><th colspan="2">TOTAL</th><th>$5,108</th></tr>
</table>
</section>

<section id="tips">
<h2>üí° Essential Tips</h2>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
    <div class="info-box">
        <h4>üöÜ Transportation</h4>
        <ul>
            <li>Buy JR Pass BEFORE arriving</li>
            <li>Get Suica card at airport</li>
            <li>Download offline maps</li>
            <li>Last trains ~midnight</li>
        </ul>
    </div>
    <div class="info-box">
        <h4>üí¥ Money</h4>
        <ul>
            <li>Bring cash - many places cash-only</li>
            <li>7-Eleven ATMs work</li>
            <li>Daily: $100-150/person</li>
            <li>NO TIPPING!</li>
        </ul>
    </div>
    <div class="info-box">
        <h4>üçú Food</h4>
        <ul>
            <li>Top restaurants: book 1-3 months ahead</li>
            <li>Breakfast: 7-Eleven $2-5</li>
            <li>Lunch: cheapest meal $10-20</li>
            <li>Dinner: $30-150+</li>
        </ul>
    </div>
    <div class="info-box">
        <h4>üéå Culture</h4>
        <ul>
            <li>Remove shoes at temples/ryokans</li>
            <li>Quiet on trains</li>
            <li>Carry trash until you find bin</li>
            <li>Bow when saying thanks</li>
        </ul>
    </div>
</div>
</section>

<div style="text-align: center; background: var(--primary); color: white; padding: 40px 20px; margin: 40px -20px -20px -20px; border-radius: 8px;">
    <div style="font-size: 4rem;">üáØüáµ</div>
    <h2 style="color: white; border: none; margin: 20px 0;">Safe Travels!</h2>
    <p style="font-size: 1.2rem;">„ÅÑ„Å£„Å¶„Çâ„Å£„Åó„ÇÉ„ÅÑ</p>
    <p>DeWitt, Christine, Danni & Kimothy | March 4-17, 2026</p>
</div>

<!-- MODAL -->
<div id="activityModal" class="modal">
    <div class="modal-content">
        <h3 style="color: var(--primary); margin-bottom: 20px;" id="modalTitle">Add Activity</h3>
        <form id="activityForm">
            <input type="hidden" id="editDayIndex">
            <input type="hidden" id="editActivityIndex">
            
            <div class="form-group">
                <label>Time:</label>
                <input type="time" id="activityTime" required>
            </div>
            <div class="form-group">
                <label>Activity Name:</label>
                <input type="text" id="activityName" placeholder="e.g., Vintage Shopping in Harajuku" required>
            </div>
            <div class="form-group">
                <label>Details (optional):</label>
                <textarea id="activityDetails" placeholder="e.g., Meeting at KINJI store, budget ¬•5000"></textarea>
            </div>
            <div class="form-group">
                <label>Cost (optional):</label>
                <input type="text" id="activityCost" placeholder="e.g., $50-100">
            </div>
            <div class="form-group">
                <label>Who's joining?</label>
                <div class="attendee-checkboxes">
                    <label><input type="checkbox" value="dewitt"> DeWitt</label>
                    <label><input type="checkbox" value="christine"> Christine</label>
                    <label><input type="checkbox" value="danni"> Danni</label>
                    <label><input type="checkbox" value="kimothy"> Kimothy</label>
                </div>
            </div>
            <div class="modal-buttons">
                <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                <button type="submit" class="btn btn-primary" id="saveBtn">Save Activity</button>
            </div>
        </form>
    </div>
</div>

<script>
// Complete trip data with all content
const tripDays = [
    {
        date: "March 4", day: "Wednesday", title: "Tokyo - Arrival & Onsen", city: "tokyo",
        hotel: { name: "Shiba Park Hotel", near: "Tokyo Tower (5 min walk)", stations: "Onarimon (2 min), Daimon (5 min)", map: "https://www.google.com/maps/place/Shiba+Park+Hotel,+Tokyo" },
        run: { title: "Shiba Park & Tokyo Tower Loop - 5 km", details: ["Start: Right outside hotel!", "Route: Shiba Park ‚Üí Zojoji Temple ‚Üí Tokyo Tower ‚Üí Back", "Time: 25-30 minutes", "Best: 6-7 AM (200+ cherry blossoms!)", "Walk through temple grounds!"], map: "https://www.google.com/maps/place/Shiba+Park" },
        landmarks: [
            {name: "Tokyo Tower", url: "https://www.google.com/maps/place/Tokyo+Tower"},
            {name: "Imperial Palace", url: "https://www.google.com/maps/place/Imperial+Palace+Tokyo"},
            {name: "Meiji Shrine", url: "https://www.google.com/maps/place/Meiji+Shrine"}
        ],
        activities: [
            {time: "15:20", name: "Arrive Haneda Airport", cost: "-", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "17:00", name: "Check-in Shiba Park Hotel", cost: "-", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "19:00", name: "Onsen (Toyosu or Spa LaQua)", cost: "$35", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ],
        restaurants: [
            {name: "Tofu-ya Ukai", type: "Traditional Tofu Kaiseki", desc: "10 min walk from hotel! Beautiful traditional house. RESERVE AHEAD!", price: "$80-150", url: "https://www.ukai.co.jp/english/shiba/"},
            {name: "Local Izakaya", type: "Casual Japanese Pub", desc: "Multiple options around Daimon/Hamamatsucho. Perfect for jet lag!", price: "$30-50"}
        ]
    },
    {
        date: "March 5", day: "Thursday", title: "Tokyo - Imperial Palace & Tsukiji", city: "tokyo",
        activities: [
            {time: "10:00", name: "Imperial Palace East Gardens", cost: "Free", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "11:00", name: "Tsukiji Sushi Making Class (4 hrs)", cost: "$146", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "16:00", name: "Ginza Art Aquarium", cost: "$17", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 6", day: "Friday", title: "Tokyo - Harajuku Vintage Shopping", city: "tokyo",
        activities: [
            {time: "10:00", name: "Meiji Shrine", cost: "Free", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "12:00", name: "Harajuku Vintage Shopping (KINJI, Chicago, Flamingo)", cost: "Shopping", details: "Most shops open 11 AM-12 PM", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "19:00", name: "Shinjuku Bar Hopping Tour (food included!)", cost: "$114", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 7", day: "Saturday", title: "Tokyo - Sumo & TeamLab", city: "tokyo",
        activities: [
            {time: "12:00", name: "Asakusa Sumo Club (BOOKED!)", cost: "-", details: "Watch training, chanko nabe lunch, Q&A", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "14:30", name: "TeamLab Planets", cost: "$30", details: "Bring shorts - you walk through water! Go barefoot.", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 8", day: "Sunday", title: "Kyoto - Travel Day", city: "kyoto",
        hotel: { name: "Hotel Granvia Kyoto", near: "INSIDE Kyoto Station!", map: "https://www.google.com/maps/place/Hotel+Granvia+Kyoto" },
        run: { title: "Kamo River Path - 3-6 km (adjustable!)", details: ["Start: 5 min walk east from hotel", "Run along riverside paths - choose your distance!", "Best: 6-7 AM (locals doing Tai Chi!)", "Kyoto's #1 signature run!"], map: "https://www.google.com/maps/search/Kamo+River+Kyoto" },
        activities: [
            {time: "11:00", name: "Shinkansen to Kyoto", cost: "~$90", details: "‚òÖ BOOK E SEATS FOR MT. FUJI VIEW! ‚òÖ", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 9", day: "Monday", title: "Kyoto - Nijo Castle & Gion", city: "kyoto",
        activities: [
            {time: "10:00", name: "Nijo Castle", cost: "$6", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "11:30", name: "Nishiki Market lunch", cost: "$15-30", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "15:00", name: "Gion District", cost: "Free", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 10", day: "Tuesday", title: "Kyoto - Arashiyama", city: "kyoto",
        activities: [
            {time: "09:00", name: "Bamboo Grove (go early!)", cost: "Free", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "11:00", name: "Monkey Park (hike 30min)", cost: "$10", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 11", day: "Wednesday", title: "Kyoto - Fushimi Inari", city: "kyoto",
        activities: [
            {time: "08:00", name: "Fushimi Inari (EARLY!)", cost: "Free", details: "10,000 orange gates!", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "12:00", name: "Sake district lunch", cost: "$20-40", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "19:00", name: "Bar Hopping Tour", cost: "$113", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 12", day: "Thursday", title: "Osaka - Classic Osaka", city: "osaka",
        hotel: { name: "Zentis Osaka", near: "Dotonbori area - heart of food scene!", map: "https://www.google.com/maps/place/Zentis+Osaka" },
        run: { title: "Nakanoshima Loop - 3-6 km (Hotel's Route!)", details: ["Start: Right at hotel entrance!", "Hotel's official route - GM runs this himself!", "Best: 6-7 AM (sunrise at fountain!)", "Aqua Metropolis views!"], map: "https://www.google.com/maps/search/Nakanoshima+Park+Osaka" },
        activities: [
            {time: "13:30", name: "Osaka Castle", cost: "$10-15", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "15:00", name: "Kuromon Market - fresh seafood!", cost: "$20-40", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "19:00", name: "Dotonbori (Glico Man!)", cost: "-", details: "Street food hopping!", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 13", day: "Friday", title: "Osaka - DECISION DAY", city: "osaka",
        activities: [
            {time: "09:00", name: "DECISION: Naoshima Art Island OR Cultural Osaka Day", cost: "$175 or $100", details: "Option A: Art Island (full day, exhausting) | Option B: Cultural Osaka (relaxed, more food!)", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 14", day: "Saturday", title: "Hakone - Ryokan & Onsen", city: "hakone",
        hotel: { name: "Hakone Kowakien TEN-YU", near: "Includes kaiseki dinners & breakfast!", map: "https://www.google.com/maps/place/Hakone+Kowakien+TEN-YU" },
        activities: [
            {time: "11:00", name: "Travel to Hakone", cost: "$80", details: "Shinkansen to Odawara + Hakone Pass", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "18:30", name: "Kaiseki Dinner & Onsen", cost: "Included", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 15", day: "Sunday", title: "Hakone - Loop Tour", city: "hakone",
        activities: [
            {time: "11:00", name: "Hakone Loop (Ropeway, Owakudani, Lake Ashi, Hakone Shrine)", cost: "$45", details: "Try black eggs at Owakudani!", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 16", day: "Monday", title: "Tokyo - Return & Shopping", city: "tokyo",
        hotel: { name: "Hotel Groove Shinjuku", near: "Near Shinjuku Station", map: "https://www.hotel-groove.com/shinjuku/" },
        activities: [
            {time: "11:59", name: "Romancecar to Shinjuku (scenic!)", cost: "$17", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "14:30", name: "Shopping in Shinjuku", cost: "-", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "19:00", name: "Final dinner!", cost: "$60-150", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    },
    {
        date: "March 17", day: "Tuesday", title: "St. Patrick's Day & Departure", city: "tokyo",
        activities: [
            {time: "12:30", name: "üçÄ Irish Pub Lunch! (Dubliners', An S√≥l√°s, or Paddy's Junction)", cost: "$20-40", details: "WEAR GREEN! Guinness, whiskey, fish & chips", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]},
            {time: "17:20", name: "Depart Haneda üáØüáµ‚úàÔ∏è", cost: "-", details: "Sayonara!", isOriginal: true, attendees: ["dewitt", "christine", "danni", "kimothy"]}
        ]
    }
];

const nightlifeData = {
    tokyo: [
        {name: "WOMB", area: "Shibuya", music: "House/Techno", cost: "¬•2,500-3,500", note: "#47 worldwide! Skip weekdays - Saturdays best"},
        {name: "ZOUK Tokyo", area: "Ginza", music: "EDM/House", cost: "¬•3,000-4,000", note: "#1 in Asia! Newest super club"},
        {name: "TK Shibuya", area: "Shibuya", music: "EDM/Hip-Hop", cost: "¬•2,500-3,500", note: "1,000 capacity - biggest single floor"},
        {name: "1OAK", area: "Roppongi", music: "Hip-Hop/R&B", cost: "¬•3,500-5,000", note: "NYC club - upscale, celebrity sightings"}
    ],
    kyoto: [
        {name: "Butterfly", area: "Kiyamachi", music: "Hip-Hop", cost: "Cheap!", note: "Best club in Kyoto"},
        {name: "The Roots if all evil", area: "Near Station", music: "Gin Bar", cost: "¬•800", note: "Intimate, 8 seats only"},
        {name: "Kiyamachi Street", area: "Central", music: "Various", cost: "¬•500-1,000", note: "Bar crawl area - uni students"}
    ],
    osaka: [
        {name: "Club Joule", area: "Shinsaibashi", music: "EDM/Hip-Hop", cost: "¬•2,500-3,500", note: "800 capacity, 3 floors"},
        {name: "Amerikamura", area: "Youth District", music: "Alternative", cost: "Varies", note: "Underground scene - Osaka's Shibuya"},
        {name: "Dotonbori Bars", area: "Outside Hotel!", music: "Izakayas", cost: "¬•500-1,000", note: "Steps from Zentis!"}
    ],
    hakone: []
};

// State
let currentUser = null;
let currentDay = null;
let editMode = false;
let editDayIndex = null;
let editActivityIndex = null;
let customActivities = JSON.parse(localStorage.getItem("japanActivities")) || {};

// Initialize
document.addEventListener("DOMContentLoaded", () => {
    renderDays();
    setupEventListeners();
});

function setupEventListeners() {
    document.querySelectorAll(".user-btn").forEach(btn => {
        btn.addEventListener("click", () => {
            document.querySelectorAll(".user-btn").forEach(b => b.classList.remove("active"));
            btn.classList.add("active");
            currentUser = btn.dataset.user;
        });
    });
    
    document.getElementById("cancelBtn").addEventListener("click", closeModal);
    document.getElementById("activityForm").addEventListener("submit", handleSaveActivity);
    document.getElementById("activityModal").addEventListener("click", (e) => {
        if (e.target.id === "activityModal") closeModal();
    });
}

function renderDays() {
    const container = document.getElementById("days-container");
    container.innerHTML = "";
    
    tripDays.forEach((day, dayIndex) => {
        const allActivities = [...day.activities];
        
        // Add custom activities
        if (customActivities[dayIndex]) {
            customActivities[dayIndex].forEach(act => {
                allActivities.push({...act, isOriginal: false});
            });
        }
        
        // Sort by time
        allActivities.sort((a, b) => a.time.localeCompare(b.time));
        
        const daySection = document.createElement("div");
        daySection.className = "day-section";
        daySection.id = day.city;
        
        let cityImageHTML = "";
        if (dayIndex === 0 || tripDays[dayIndex-1].city !== day.city) {
            cityImageHTML = `<img src="${'${images[day.city]}'}" alt="${day.city}" class="city-header-img" onerror="this.style.display='none'">`;
        }
        
        let nightlifeHTML = "";
        if (nightlifeData[day.city] && nightlifeData[day.city].length > 0 && 
            (dayIndex === 0 || tripDays[dayIndex-1].city !== day.city)) {
            nightlifeHTML = `
                <div class="nightlife-section">
                    <h3>üåÉ ${day.city.charAt(0).toUpperCase() + day.city.slice(1)} Nightlife</h3>
                    <div class="club-grid">
                        ${nightlifeData[day.city].map(club => `
                            <div class="club-card">
                                <div class="club-name">${club.name}</div>
                                <div class="club-details">üìç ${club.area} ‚Ä¢ üéµ ${club.music}</div>
                                <div class="club-details">üí∞ ${club.cost}</div>
                                <div class="club-details" style="margin-top: 8px;">${club.note}</div>
                            </div>
                        `).join("")}
                    </div>
                </div>
            `;
        }
        
        let hotelHTML = "";
        if (day.hotel) {
            hotelHTML = `
                <div class="info-box">
                    <h4>üìç ${day.hotel.name}</h4>
                    <p>${day.hotel.near}</p>
                    ${day.hotel.stations ? `<p><strong>Stations:</strong> ${day.hotel.stations}</p>` : ""}
                    <a href="${day.hotel.map}" class="btn-link" target="_blank">Open in Google Maps</a>
                </div>
            `;
        }
        
        let runHTML = "";
        if (day.run) {
            runHTML = `
                <div class="run-box">
                    <h4>üèÉ MORNING RUNNING ROUTE</h4>
                    <p><strong>${day.run.title}</strong></p>
                    <ul>
                        ${day.run.details.map(d => `<li>${d}</li>`).join("")}
                    </ul>
                    <a href="${day.run.map}" class="btn-link" target="_blank">View Route Map</a>
                </div>
            `;
        }
        
        let landmarksHTML = "";
        if (day.landmarks) {
            landmarksHTML = `
                <h4>üèØ Landmarks</h4>
                <div class="landmark-links">
                    ${day.landmarks.map(l => `<a href="${l.url}" target="_blank">${l.name}</a>`).join("")}
                </div>
            `;
        }
        
        let restaurantsHTML = "";
        if (day.restaurants) {
            restaurantsHTML = `<h4>üçΩÔ∏è Restaurant Recommendations</h4>`;
            day.restaurants.forEach(r => {
                restaurantsHTML += `
                    <div class="restaurant-card">
                        <h4>${r.name}</h4>
                        <p class="subtitle-text">${r.type}</p>
                        <p>${r.desc}</p>
                        <p class="price">${r.price}</p>
                        ${r.url ? `<a href="${r.url}" class="btn-link" target="_blank">Reserve</a>` : ""}
                    </div>
                `;
            });
        }
        
        daySection.innerHTML = `
            ${cityImageHTML}
            ${nightlifeHTML}
            <div class="day-header">
                <div>
                    <h3 class="day-title">${day.date} - ${day.title}</h3>
                    <div style="color: #666;">${day.day}</div>
                </div>
                <button class="add-activity-btn" data-day="${dayIndex}">+ Add Activity</button>
            </div>
            
            ${hotelHTML}
            ${runHTML}
            ${landmarksHTML}
            
            <h4>Schedule:</h4>
            <div class="activity-list">
                ${allActivities.map((act, actIndex) => renderActivity(act, dayIndex, actIndex, allActivities)).join("")}
            </div>
            
            ${restaurantsHTML}
        `;
        
        container.appendChild(daySection);
        daySection.querySelector(".add-activity-btn").addEventListener("click", () => openModal(dayIndex));
    });
}

function renderActivity(act, dayIndex, actIndex, allActivities) {
    const cardClass = act.isOriginal ? "activity-card original-activity" : "activity-card custom-activity";
    
    return `
        <div class="${cardClass}">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                <div class="activity-time">${formatTime(act.time)}</div>
                <button class="edit-btn" onclick="editActivity(${dayIndex}, ${actIndex})">Edit</button>
            </div>
            <div class="activity-title">${act.name}</div>
            ${act.details ? `<div class="activity-details">${act.details}</div>` : ""}
            ${act.cost ? `<div class="activity-details">üí∞ ${act.cost}</div>` : ""}
            <div style="margin-top: 10px;">
                ${act.attendees.map(user => `<span class="attendee-tag ${user}">${getUserDisplayName(user)}</span>`).join("")}
            </div>
            ${act.addedBy ? `<div class="added-by">Added by ${getUserDisplayName(act.addedBy)}</div>` : ""}
            ${!act.isOriginal ? `
                <div class="activity-actions">
                    <button class="delete-btn" onclick="deleteActivity(${dayIndex}, ${actIndex})">Delete</button>
                </div>
            ` : ""}
        </div>
    `;
}

function openModal(dayIndex, activity = null, activityIndex = null) {
    if (!currentUser) {
        alert("Please select your name first!");
        return;
    }
    
    currentDay = dayIndex;
    editMode = activity !== null;
    editActivityIndex = activityIndex;
    
    const modal = document.getElementById("activityModal");
    const form = document.getElementById("activityForm");
    
    document.getElementById("modalTitle").textContent = editMode ? "Edit Activity" : "Add Activity";
    document.getElementById("saveBtn").textContent = editMode ? "Save Changes" : "Add Activity";
    
    if (editMode && activity) {
        document.getElementById("activityTime").value = activity.time;
        document.getElementById("activityName").value = activity.name;
        document.getElementById("activityDetails").value = activity.details || "";
        document.getElementById("activityCost").value = activity.cost || "";
        
        document.querySelectorAll(".attendee-checkboxes input").forEach(cb => {
            cb.checked = activity.attendees.includes(cb.value);
        });
    } else {
        form.reset();
    }
    
    modal.classList.add("active");
}

function closeModal() {
    document.getElementById("activityModal").classList.remove("active");
    editMode = false;
    currentDay = null;
    editActivityIndex = null;
}

function handleSaveActivity(e) {
    e.preventDefault();
    
    const attendees = Array.from(document.querySelectorAll(".attendee-checkboxes input:checked")).map(cb => cb.value);
    if (attendees.length === 0) {
        alert("Please select at least one person joining!");
        return;
    }
    
    const activity = {
        time: document.getElementById("activityTime").value,
        name: document.getElementById("activityName").value,
        details: document.getElementById("activityDetails").value,
        cost: document.getElementById("activityCost").value,
        attendees,
        addedBy: currentUser,
        timestamp: Date.now()
    };
    
    if (editMode && editDayIndex !== null && editActivityIndex !== null) {
        // Update existing activity
        const originalCount = tripDays[editDayIndex].activities.length;
        
        // Reconstruct sorted activities
        const allActivities = [...tripDays[editDayIndex].activities];
        if (customActivities[editDayIndex]) {
            customActivities[editDayIndex].forEach(act => {
                allActivities.push({...act, isOriginal: false});
            });
        }
        allActivities.sort((a, b) => a.time.localeCompare(b.time));
        
        // Find if this is an original or custom activity
        const originalActivity = allActivities[editActivityIndex];
        
        if (originalActivity.isOriginal) {
            // Find the original activity in unsorted list
            const originalIndex = tripDays[editDayIndex].activities.findIndex(
                a => a.time === originalActivity.time && a.name === originalActivity.name
            );
            tripDays[editDayIndex].activities[originalIndex] = {...activity, isOriginal: true};
        } else {
            // Find custom activity
            if (!customActivities[editDayIndex]) customActivities[editDayIndex] = [];
            const customIndex = customActivities[editDayIndex].findIndex(
                a => a.time === originalActivity.time && a.name === originalActivity.name && a.timestamp === originalActivity.timestamp
            );
            if (customIndex !== -1) {
                customActivities[editDayIndex][customIndex] = activity;
            }
        }
    } else {
        // Add new activity
        if (!customActivities[currentDay]) customActivities[currentDay] = [];
        customActivities[currentDay].push(activity);
    }
    
    localStorage.setItem("japanActivities", JSON.stringify(customActivities));
    renderDays();
    closeModal();
}

function editActivity(dayIndex, activityIndex) {
    if (!currentUser) {
        alert("Please select your name first!");
        return;
    }
    
    // Reconstruct allActivities for this day
    const allActivities = [...tripDays[dayIndex].activities];
    if (customActivities[dayIndex]) {
        customActivities[dayIndex].forEach(act => {
            allActivities.push({...act, isOriginal: false});
        });
    }
    allActivities.sort((a, b) => a.time.localeCompare(b.time));
    
    const activity = allActivities[activityIndex];
    editDayIndex = dayIndex;
    editActivityIndex = activityIndex;
    openModal(dayIndex, activity, activityIndex);
}

function deleteActivity(dayIndex, activityIndex) {
    if (confirm("Delete this activity?")) {
        const originalCount = tripDays[dayIndex].activities.length;
        const customIndex = activityIndex - originalCount;
        
        if (customActivities[dayIndex]) {
            customActivities[dayIndex].splice(customIndex, 1);
            localStorage.setItem("japanActivities", JSON.stringify(customActivities));
            renderDays();
        }
    }
}

function formatTime(time) {
    const [hours, minutes] = time.split(":");
    const hour = parseInt(hours);
    const ampm = hour >= 12 ? "PM" : "AM";
    const displayHour = hour === 0 ? 12 : hour > 12 ? hour - 12 : hour;
    return `${displayHour}:${minutes} ${ampm}`;
}

function getUserDisplayName(user) {
    return {dewitt: "DeWitt", christine: "Christine", danni: "Danni", kimothy: "Kimothy"}[user] || user;
}
</script>


</body>
</html>
